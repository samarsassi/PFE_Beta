<div class="bpmn-editor-wrapper">
  <!-- Barre dâ€™outils -->
  <div class="bpmn-toolbar">
    <button class="download-btn" (click)="downloadDiagram()">â¬‡ TÃ©lÃ©charger BPMN</button>
    <button class="deploy-btn" (click)="deployDiagramToBackend()">ğŸš€ DÃ©ployer BPMN</button>

    <!-- Superposition du chargeur -->
    <div class="loader-overlay" *ngIf="isLoading">
      <div class="spinner"></div>
    </div>

    <!-- Superposition de succÃ¨s -->
    <div class="success-overlay" *ngIf="isSuccess">
      <div class="success-box">
        âœ… Diagramme dÃ©ployÃ© avec succÃ¨s !
      </div>
    </div>

    <div class="load-group">
      <select [(ngModel)]="selectedHistoryVersion">
        <option *ngFor="let version of HistoryVersions" [value]="version">
          {{ version }}
        </option>
      </select>
      <button class="deploylatest-btn" (click)="loadSelectedHistory()">ğŸ•‘ Charger une version prÃ©cÃ©dente</button>
    </div>
    <!-- <button class="extract-conditions-btn" (click)="extractAndSaveConditions()">ğŸ”§ Extraire les conditions</button> -->
  </div>

  <!-- SÃ©lecteur de dÃ©lÃ©guÃ© -->
  <div *ngIf="selectedElement?.type === 'bpmn:ServiceTask'" class="delegate-selector">
    <label for="delegateSelect">Classe dÃ©lÃ©guÃ©e :</label>
    <select id="delegateSelect" (change)="onDelegateChange($event)" [value]="selectedDelegate">
      <option value="" disabled>SÃ©lectionner un dÃ©lÃ©guÃ©</option>
      <option *ngFor="let delegate of delegateClasses" [value]="delegate.beanName">
        {{ delegate.description }} ({{ delegate.beanName }})
      </option>
    </select>
  </div>

  <!-- Conteneur BPMN -->
  <div class="bpmn-container">
    <div class="palette" #palette></div>
    <div class="canvas" #canvas></div>
    <div class="properties-panel" #properties></div>
  </div>
</div>

<!-- Lien vers WorkflowFormComponent -->
<app-workflow-form #workflowForm></app-workflow-form>