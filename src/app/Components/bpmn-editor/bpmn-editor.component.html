<div class="bpmn-editor-wrapper">
  <!-- Toolbar -->
<div class="bpmn-toolbar">
  <button class="download-btn" (click)="downloadDiagram()">â¬‡ Download BPMN</button>
  <button class="deploy-btn" (click)="deployDiagramToBackend()">ðŸš€ Deploy BPMN</button>
  <div class="load-group">
    <select [(ngModel)]="selectedHistoryVersion">
      <option *ngFor="let version of HistoryVersions" [value]="version">
        {{ version }}
      </option>
    </select>
    <button class="deploylatest-btn" (click)="loadSelectedHistory()">ðŸ•‘ Load Previous</button>
  </div>
  <!-- <button class="extract-conditions-btn" (click)="extractAndSaveConditions()">ðŸ”§ Extract Conditions</button> -->
</div>

  <!-- Delegate dropdown -->
  <div *ngIf="selectedElement?.type === 'bpmn:ServiceTask'" class="delegate-selector">
    <label for="delegateSelect">Delegate Class:</label>
    <select id="delegateSelect" (change)="onDelegateChange($event)" [value]="selectedDelegate">
      <option value="" disabled>Select a delegate</option>
      <option *ngFor="let delegate of delegateClasses" [value]="delegate.beanName">
        {{ delegate.description }} ({{ delegate.beanName }})
      </option>
    </select>
  </div>

  <!-- BPMN Container -->
  <div class="bpmn-container">
    <div class="palette" #palette></div>
    <div class="canvas" #canvas></div>
    <div class="properties-panel" #properties></div>
  </div>
</div>

<!-- Hook to WorkflowFormComponent -->
<app-workflow-form #workflowForm></app-workflow-form>
