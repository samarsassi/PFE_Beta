<!-- Responsive JobPortal Main Page Layout -->
<div class="page-wrapper">
  <!-- Proper Header and Navigation -->
  <header>
    <div class="container header-container">
      <h1 class="logo">JobPortal</h1>
      <button class="menu-toggle" (click)="toggleMenu()" aria-label="Ouvrir le menu">☰</button>
      <ul class="desktop-nav">
        <li class="nav-names"><a routerLink="/main">Accueil</a></li>
        <li class="nav-names" *ngIf="hasCandidatures">
          <a routerLink="/main/mes-candidatures">Mes Candidatures</a>
        </li>
        <li class="nav-names"><a routerLink="/main" fragment="jobs">Offres</a></li>
        <li class="nav-names"><a routerLink="/main/test">Postuler</a></li>
        <li class="nav-names"><a href="#">À propos</a></li>
        <li class="nav-names"><a href="#">Contact</a></li>
        <li class="nav-names" *ngIf="!isLoggedIn">
          <a routerLink="/login">Login</a>
        </li>
        <li class="nav-names user-dropdown" #dropdownRef>
          <span style="font-size: large; cursor:pointer;" (click)="toggleDropdown(); $event.stopPropagation()">{{ userName }}</span>
          <span class="arrow" [class.rotated]="dropdownOpen" (click)="toggleDropdown(); $event.stopPropagation()" style="cursor:pointer;">&#x25BC;</span>
          <ul class="dropdown-menu" [class.open]="dropdownOpen" (click)="$event.stopPropagation()">
            <li><a (click)="ViewProfile(); dropdownOpen = false; $event.stopPropagation()">Mon Profil</a></li>
            <li *ngIf="hasAdminRole()"><a routerLink="/home" (click)="dropdownOpen = false; $event.stopPropagation()">Dashboard</a></li>
            <li><a (click)="logout(); dropdownOpen = false; $event.stopPropagation()">Déconnexion</a></li>
          </ul>
        </li>
      </ul>
      <nav class="nav-panel" [class.open]="menuOpen" (click)="$event.stopPropagation()">
        <ul class="nav-links">
          <li class="nav-names"><a routerLink="/main" (click)="toggleMenu(); $event.stopPropagation()">Accueil</a></li>
          <li class="nav-names" *ngIf="hasCandidatures">
            <a routerLink="/main/mes-candidatures" (click)="toggleMenu(); $event.stopPropagation()">Mes Candidatures</a>
          </li>
          <li class="nav-names"><a routerLink="/main" fragment="jobs" (click)="toggleMenu(); $event.stopPropagation()">Offres</a></li>
          <li class="nav-names"><a routerLink="/main/test" (click)="toggleMenu(); $event.stopPropagation()">Postuler</a></li>
          <li class="nav-names"><a href="#" (click)="toggleMenu(); $event.stopPropagation()">À propos</a></li>
          <li class="nav-names"><a href="#" (click)="toggleMenu(); $event.stopPropagation()">Contact</a></li>
          <li class="nav-names" *ngIf="!isLoggedIn">
            <a routerLink="/login" (click)="toggleMenu(); $event.stopPropagation()">Login</a>
          </li>
          <li class="nav-names user-dropdown" #dropdownRef>
            <span style="font-size: large; cursor:pointer;" (click)="toggleDropdown(); $event.stopPropagation()">{{ userName }}</span>
            <span class="arrow" [class.rotated]="dropdownOpen" (click)="toggleDropdown(); $event.stopPropagation()" style="cursor:pointer;">&#x25BC;</span>
            <ul class="dropdown-menu" [class.open]="dropdownOpen" (click)="$event.stopPropagation()">
              <li><a (click)="ViewProfile(); toggleMenu(); dropdownOpen = false; $event.stopPropagation()">Mon Profil</a></li>
              <li *ngIf="hasAdminRole()"><a routerLink="/home" (click)="toggleMenu(); dropdownOpen = false; $event.stopPropagation()">Dashboard</a></li>
              <li><a (click)="logout(); toggleMenu(); dropdownOpen = false; $event.stopPropagation()">Déconnexion</a></li>
            </ul>
          </li>
        </ul>
      </nav>
    </div>
  </header>
  <main class="main-content">
    <router-outlet></router-outlet>
  </main>
  <footer>
    <div class="container">
      <p>&copy; 2025 JobPortal. Tous droits réservés.</p>
    </div>
  </footer>
  <!-- Scroll to Top Button -->
  <app-scroll-top></app-scroll-top>
  <app-cv-analyzer></app-cv-analyzer>
</div>